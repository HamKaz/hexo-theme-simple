<%
    var items = [];
    var title = '';
    var isTagIndex = page.type === 'tags' || page.type === 'tag';
    var isCategoryIndex = page.type === 'categories' || page.type === 'category';
    if (isTagIndex) {
        items = site.tags;
        title = __('tags');
    } else if (isCategoryIndex) {
        items = site.categories;
        title = __('categories');
    }
%>

<div class="row">
    <div class="col-12 col-md-8 mx-0 my-0 px-0">
        <main class="card mx-2 my-2 sidebar-sticky">
            <% if (isCategoryIndex || isTagIndex) { %>
                <nav class="row mx-3 mt-3 mb-0">
                    <%- partial('_partial/breadcrumbs') %>
                </nav>
                <section class="row mx-5 mt-0 mb-3">
                    <% if (isCategoryIndex) { %>
                        <% if (site.categories.length){ %>
                          <div class="border-left mx-3 my-0">
                            <%- list_categories({show_count: theme.show_count}) %>
                          </div>
                        <% } %>
                    <% } else if (isTagIndex) { %>
                        <% if (site.tags.length){ %>
                          <div class="border-left mx-3 my-0">
                            <%- list_tags({show_count: theme.show_count}) %>
                          </div>
                        <% } %>
                    <% } %>
                </section>
            <% } else { %>
                <figure class="row mx-3 my-3">
                    <div class="col-12 mx-auto mx-0 my-0 px-0">
                        <div class="flex">
                            <div class="flex-item">
                                <div class="image-trim">
                                    <img class="h-100" src="<%- config.root %><%- page.cover_image || theme.default_cover_image %>" alt="<%- page.title || "Untitled" %>">
                                </div>
                            </div>
                        </div>
                    </div>
                </figure>
                <div class="row mx-auto mx-3 my-0">
                    <%- partial('_partial/paragraph/title', { item: page, title_jump: false }) %>
                </div>
                <% if (is_post()) { %>
                    <!-- date for post -->
                    <div class="row mx-auto mx-3 my-0">
                        <%- partial('_partial/paragraph/date', { item: page }) %>
                    </div>
                <% } %>
                <div class="row mx-3 my-0">
                    <%- partial('_partial/paragraph/content', { item: page }) %>
                </div>
            <% } %>
        </main>
    </div>
    <div class="col-12 col-md-4 mx-0 my-0 px-0 d-none d-md-block">
          <%- partial('_partial/aside') %>
    </div>
</div>
